@model IEnumerable<Omnae.Model.Models.OrderStateTracking>

@using Omnae.Common
@using Omnae.Model.Models


<style>

    .milestone.dl-horizontal dt {
        text-align:left;
        width:200px!important;
    }
   
    .milestone.dl-horizontal dd {
        text-align: right;
    }
</style>

<div class="card card-cascade col-md-12 orderdetail-min-height">
    <div class="card-block">
        <div class="col-md-6">
            <h4 class="green-text">Milestone</h4>
        </div>
        <div class="col-md-6">
            ETA for next update: NA
        </div>
    </div>
    <div class="card-block">
        <div class="col-md-12">
            <dl class="dl-horizontal milestone">
                @{
                    var orderStates = Model;
                    if (orderStates.Count() > 0)
                    {
                        OrderStateTracking st = null;
                        if ((st = orderStates.Where(x => x.StateId == (int)States.ReOrderPaid).LastOrDefault()) != null)
                        {
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ReOrderPaid).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Re-Order Paid</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Re-Order Paid</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProductionStarted).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Production Started</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Production Started</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProductionComplete).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Production Complete</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i>  Production Complete</dt>
                                <dd></dd>
                            }
                        }
                        else
                        {

                            if ((st = orderStates.Where(x => x.StateId == (int)States.OrderPaid).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Order Paid</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Order Paid</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProofingStarted).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Proofing Started</dt>
                                <dd>@st.ModifiedUtc</dd>

                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Proofing Started</dt>
                                <dd></dd>
                            }

                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProofingComplete).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Proof Complete</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Proof Complete</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProofApproved).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Proof Approved</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Proof Approved</dt>
                                <dd></dd>
                            }

                            if ((st = orderStates.Where(x => x.StateId == (int)States.SampleStarted).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Tooling Complete</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Tooling Complete</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.SampleComplete).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Sample Complete</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Sample Complete</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.SampleApproved).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Sample Approved</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Sample Approved</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProductionStarted).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Production Started</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i> Production Started</dt>
                                <dd></dd>
                            }
                            if ((st = orderStates.Where(x => x.StateId == (int)States.ProductionComplete).Select(y => y).FirstOrDefault()) != null)
                            {
                                <dt><i class="far fa-check-square fa-1x" aria-hidden="true"></i> Production Complete</dt>
                                <dd>@st.ModifiedUtc</dd>
                            }
                            else
                            {
                                <dt><i class="far fa-square fa-1x" aria-hidden="true"></i>  Production Complete</dt>
                                <dd></dd>
                            }
                        }
                    }
                }
            </dl>
        </div>
    </div>
</div>
